CheckFirstTime("year_3.lua")
hitsquad_wait_for_glottis = function() -- line 8
    sleep_for(4800)
    glottis:set_visibility(TRUE)
end
cut_scene.hitsquad = function(arg1) -- line 13
    START_CUT_SCENE()
    set_override(cut_scene.hitsquad_override)
    preload_sfx("ei_htopn.wav")
    preload_sfx("glgrbmn2.wav")
    manny:walkto(0.469071, -2.51173, 0, 0, -30.8321, 0)
    manny:wait_for_actor()
    manny:head_look_at_point(0.909082, -1.7247, 0.15)
    manny:say_line("/ilma009/")
    manny:head_look_at(nil)
    manny:wait_for_message()
    glottis:put_in_set(il)
    glottis:set_costume("glottis_sailor.cos")
    glottis:setpos(1.14078, 0.289687, -0.0201)
    glottis:setrot(0, 165, 0)
    glottis:push_costume("gl_HITMAN.cos")
    glottis:set_visibility(FALSE)
    il.hitsquad[1]:play_chore(0)
    il.hitsquad[2]:play_chore(0)
    il.hitsquad[3]:play_chore(0)
    music_state:set_sequence(seqHitMen)
    sleep_for(900)
    skinny_hit_man:say_line("/htssm01/")
    manny:push_costume("mn_HITMAN.cos")
    manny:play_chore(1)
    manny:setpos(0.469071, -2.51173, 0)
    manny:setrot(0, -30.8321, 0)
    manny:play_chore(0)
    glottis:play_chore(0)
    start_script(hitsquad_wait_for_glottis)
    skinny_hit_man:wait_for_message()
    large_hit_man:say_line("/htslm02/")
    sleep_for(1500)
    start_sfx("ei_htopn.wav")
    sleep_for(1800)
    start_sfx("glgrbmn2.wav")
    manny:wait_for_chore()
    manny:set_visibility(FALSE)
    glottis:set_visibility(FALSE)
    il.hitsquad[1]:wait_for_chore()
    il.hitsquad[2]:wait_for_chore()
    il.hitsquad[3]:wait_for_chore()
    ei:switch_to_set()
    NewObjectState(ei_intha, OBJSTATE_UNDERLAY, "ei_door.bm")
    glottis:set_visibility(TRUE)
    ei.il_door:set_object_state("ei_door.cos")
    ei.il_door:play_chore(1)
    glottis:setpos(0.430727, 0.889038, 0)
    glottis:setrot(0, 9.42226, 0)
    glottis:pop_costume()
    glottis:stop_chore()
    glottis:push_costume("gl_rescue_mn.cos")
    glottis:play_chore(0)
    sleep_for(1139)
    ei.il_door:play_chore(0)
    sleep_for(400)
    start_sfx("eiDorBng.wav")
    sleep_for(350)
    large_hit_man:say_line("/sylh106/")
    glottis:wait_for_chore()
    glottis:free()
    glottis:set_costume("glottis_sailor.cos")
    glottis:set_talk_color(Orange)
    glottis:set_visibility(TRUE)
    glottis:set_head(3, 4, 4, 165, 28, 80)
    glottis:set_mumble_chore(glottis_sailor_mumble)
    glottis:set_talk_chore(1, glottis_sailor_stop_talk)
    glottis:set_talk_chore(2, glottis_sailor_a)
    glottis:set_talk_chore(3, glottis_sailor_c)
    glottis:set_talk_chore(4, glottis_sailor_e)
    glottis:set_talk_chore(5, glottis_sailor_f)
    glottis:set_talk_chore(6, glottis_sailor_l)
    glottis:set_talk_chore(7, glottis_sailor_m)
    glottis:set_talk_chore(8, glottis_sailor_o)
    glottis:set_talk_chore(9, glottis_sailor_t)
    glottis:set_talk_chore(10, glottis_sailor_u)
    glottis:put_in_set(ei)
    glottis:setpos({ x = 0.575511, y = 0.750909, z = 0 })
    glottis:setrot(0, 456.801, 0)
    glottis:push_costume("gl_sailor_fastwalk.cos")
    glottis:head_look_at(nil)
    glottis:set_walk_chore(0, "gl_sailor_fastwalk.cos")
    glottis:set_walk_rate(0.5)
    glottis:follow_boxes()
    manny:pop_costume()
    manny:set_visibility(TRUE)
    manny:put_in_set(ei)
    manny:setpos({ x = 0.280511, y = 0.160909, z = 0 })
    manny:setrot(0, 471.342, 0)
    glottis:fade_in_chore("glottis_sailor_home_pose", "glottis_sailor.cos", 750)
    manny:head_look_at_point({ x = -0.1092, y = 1.1768, z = 0.406 })
    glottis:head_look_at_point({ x = -0.1092, y = 1.1768, z = 0.406 })
    wait_for_message()
    skinny_hit_man:say_line("/htssm04/")
    wait_for_message()
    manny:head_look_at_point({ x = 0.575511, y = 0.750909, z = 1 })
    glottis:head_look_at_manny()
    start_script(glottis.walkto, glottis, 0.507027, 0.975, 0, 0, 880, 0)
    glottis:say_line("/sygl109/")
    wait_for_message()
    glottis:say_line("/sygl110/")
    wait_for_message()
    large_hit_man:say_line("/sylh111/")
    glottis:head_look_at(ei.il_door)
    manny:head_look_at(ei.il_door)
    wait_for_message()
    glottis:play_chore(glottis_sailor_eyes_bulging, "glottis_sailor.cos")
    manny:head_look_at_point({ x = -0.1092, y = 1.1768, z = 0.406 })
    glottis:head_look_at_point({ x = -0.1092, y = 1.1768, z = 0.406 })
    manny:head_look_at(nil)
    start_script(ei.glottis_look_at_manny)
    glottis:pop_costume()
    glottis:play_chore_looping(glottis_sailor_flip_ears)
    ei.seen_hitman = TRUE
    glottis:set_collision_mode(COLLISION_SPHERE)
    manny:set_collision_mode(COLLISION_SPHERE)
    SetActorCollisionScale(manny.hActor, 0.35)
    SetActorCollisionScale(glottis.hActor, 0.5)
    END_CUT_SCENE()
    ei.il_door:make_untouchable()
end
cut_scene.hitsquad_override = function() -- line 145
    kill_override()
    shut_up_everybody()
    music_state:unpause()
    ei:switch_to_set()
    glottis:set_costume("glottis_sailor.cos")
    glottis:set_talk_color(Orange)
    glottis:set_visibility(TRUE)
    glottis:set_head(3, 4, 4, 165, 28, 80)
    glottis:set_mumble_chore(glottis_sailor_mumble)
    glottis:set_talk_chore(1, glottis_sailor_stop_talk)
    glottis:set_talk_chore(2, glottis_sailor_a)
    glottis:set_talk_chore(3, glottis_sailor_c)
    glottis:set_talk_chore(4, glottis_sailor_e)
    glottis:set_talk_chore(5, glottis_sailor_f)
    glottis:set_talk_chore(6, glottis_sailor_l)
    glottis:set_talk_chore(7, glottis_sailor_m)
    glottis:set_talk_chore(8, glottis_sailor_o)
    glottis:set_talk_chore(9, glottis_sailor_t)
    glottis:set_talk_chore(10, glottis_sailor_u)
    glottis:put_in_set(ei)
    glottis:setpos(0.507027, 0.975, 0)
    glottis:setrot(0, 880, 0)
    manny:default("nautical")
    manny:set_visibility(TRUE)
    manny:put_in_set(ei)
    manny:setpos({ x = 0.280511, y = 0.160909, z = 0 })
    manny:setrot(0, 471.342, 0)
    glottis:play_chore("glottis_sailor_home_pose", "glottis_sailor.cos")
    manny:head_look_at(nil)
    start_script(ei.glottis_look_at_manny)
    glottis:play_chore_looping(glottis_sailor_flip_ears)
    glottis:play_chore(glottis_sailor_eyes_bulging, "glottis_sailor.cos")
    ei.seen_hitman = TRUE
    glottis:set_collision_mode(COLLISION_SPHERE)
    manny:set_collision_mode(COLLISION_SPHERE)
    SetActorCollisionScale(manny.hActor, 0.35)
    SetActorCollisionScale(glottis.hActor, 0.5)
    ei.il_door:make_untouchable()
    IrisUp(0, 0, 1)
end
cut_scene.hydrfoil = function() -- line 190
    cutscene_menu:enable_cutscene("escape")
    op.anchor:free_object_state()
    ul.props:set_object_state()
    ul.star_anchor:free_object_state()
    ul.port_anchor:free_object_state()
    ul.tear:free_object_state()
    manny:free()
    START_CUT_SCENE()
    cur_puzzle_state[33] = TRUE
    set_override(cut_scene.skip_hyrofoil, cut_scene)
    RunFullscreenMovie("escape.snm")
    su:switch_to_set()
    END_CUT_SCENE()
end
cut_scene.skip_hydrofoil = function(arg1) -- line 210
    kill_override()
    su:switch_to_set()
end
cut_scene.thepearl = function() -- line 215
    START_CUT_SCENE()
    ps:switch_to_set()
    manny:put_in_set(ps)
    glottis:put_in_set(ps)
    ps:current_setup(ps_intro)
    glottis:setpos(6.9415, 11.4531, 2.52)
    glottis:setrot(0, -180, 0)
    manny:setpos(7.79724, 10.4291, 2.52)
    manny:setrot(0, -180, 0)
    start_script(manny.walkto, manny, 7.7906, 8.16991, 2.52, 0, -187, 0)
    start_script(glottis.walkto, glottis, 6.30801, 9.10757, 2.52, 0, -182, 0)
    IrisUp(355, 245, 1000)
    manny:wait_for_actor()
    glottis:wait_for_actor()
    MakeSectorActive("off_box", FALSE)
    glottis:say_line("/sygl112/")
    glottis:play_chore(3)
    sleep_for(1800)
    chepito:default()
    chepito:put_in_set(ps)
    chepito:follow_boxes()
    chepito:set_collision_mode(COLLISION_SPHERE)
    SetActorCollisionScale(chepito.hActor, 0.28)
    chepito:set_walk_rate(0.45)
    chepito:setpos({ x = 6.80601, y = 8.97257, z = 2.52 })
    chepito:setrot(0, -180, 0)
    glottis:pop_costume()
    glottis:set_walk_chore(0, "gl_sailor_fastwalk.cos")
    glottis:set_rest_chore(nil)
    ps:current_setup(ps_widha)
    chepito:say_line("/sych113/")
    chepito:blend(chepito_base, chepito_exclaim, 500)
    wait_for_message()
    chepito:say_line("/sych114/")
    chepito:blend(chepito_exclaim, chepito_2conv, 500)
    wait_for_message()
    chepito:say_line("/sych115/")
    chepito:blend(chepito_2conv, chepito_exclaim, 500)
    wait_for_message()
    chepito:say_line("/sych116/")
    chepito:blend(chepito_exclaim, chepito_2conv, 500)
    wait_for_message()
    play_movie("ps.snm", 168, 0)
    manny:say_line("/syma117/")
    chepito:blend(chepito_base, chepito_exclaim, 500)
    wait_for_message()
    manny:say_line("/syma118/")
    wait_for_message()
    glottis:say_line("/sygl119/")
    wait_for_message()
    glottis:say_line("/sygl120/")
    wait_for_message()
    ps:current_setup(ps_intro)
    RunFullscreenMovie("thepearl.snm")
    sleep_for(3000)
    manny:twist_head_gesture()
    manny:say_line("/syma121/")
    manny:wait_for_message()
    ps:current_setup(ps_widha)
    ps.octo_here = TRUE
    StartMovie("ps_0.snm", TRUE, 168, 161)
    if not octoeye then
        octoeye = Actor:create(nil, nil, nil, "octoeye")
    end
    octoeye:set_costume("octo_eye.cos")
    octoeye:put_in_set(ps)
    octoeye:follow_boxes()
    octoeye:play_chore_looping(0)
    SetActorScale(octoeye.hActor, 0.7)
    octoeye:ignore_boxes()
    octoeye:set_softimage_pos(-29.2413, 6.8701, 26.8876)
    octoeye:setrot(2.7954, 0, -1.2836)
    start_script(ps.octo_watch_manny)
    END_CUT_SCENE()
    start_script(ps.glottis_follow_manny)
    start_script(ps.chepito_follow_manny)
    start_script(ps.chepito_light)
end
cut_scene.subjacked = function() -- line 302
    local local1 = { }
    cur_puzzle_state[35] = TRUE
    cutscene_menu:enable_cutscene("subsaway")
    START_CUT_SCENE()
    ps:current_setup(ps_subla)
    set_override(cut_scene.skip_subjacked, cut_scene)
    RunFullscreenMovie("subsaway.snm")
    END_CUT_SCENE()
    kill_override()
    start_script(ea.arrive, ea)
end
cut_scene.skip_subjacked = function() -- line 317
    kill_override()
    StopMovie()
    start_script(ea.arrive, ea)
end
cut_scene.reunion = function() -- line 323
    manny:clear_hands()
    dr.reunited = TRUE
    cutscene_menu:enable_cutscene("reunion")
    set_override(cut_scene.reunion_override)
    START_CUT_SCENE("no head")
    IrisDown(0, 0, 1)
    RunFullscreenMovie("reunion.snm")
    fo:switch_to_set()
    fo:current_setup(fo_berws)
    manny:put_in_set(fo)
    manny:set_softimage_pos(0.0989, 0, 10.0346)
    manny:setrot(0, 251.047, 0)
    manny:head_look_at(nil)
    manny:push_costume("mn_wakeup.cos")
    manny:play_chore(1)
    sleep_for(2000)
    IrisUp(125, 370, 1000)
    sleep_for(2000)
    manny:play_chore(0)
    break_here()
    sleep_for(2000)
    pugsy:say_line("/sypu122/")
    wait_for_message()
    pugsy:say_line("/sypu123/")
    manny:wait_for_chore(0, "mn_wakeup.cos")
    manny:pop_costume()
    END_CUT_SCENE()
end
cut_scene.reunion_override = function() -- line 358
    kill_override()
    shut_up_everybody()
    music_state:unpause()
    fo:switch_to_set()
    manny:put_in_set(fo)
    manny:set_softimage_pos(0.0989, 0, 10.0346)
    manny:setrot(0, 251.047, 0)
    manny:head_look_at(nil)
    if manny:get_costume() == "mn_wakeup.cos" then
        manny:pop_costume()
    end
    IrisUp(0, 0, 1)
end
cut_scene.leg = function() -- line 371
    ar:switch_to_set()
    cutscene_menu:enable_cutscene("stocking")
    set_override(cut_scene.leg_override, cut_scene)
    START_CUT_SCENE()
    RunFullscreenMovie("stocking.snm")
    END_CUT_SCENE()
end
cut_scene.leg_override = function() -- line 381
    kill_override()
    StopMovie()
    shut_up_everybody()
    IrisUp(0, 0, 1)
end
cut_scene.hostage = function() -- line 389
    cutscene_menu:enable_cutscene("hostage")
    system:lock_display()
    manny:clear_hands()
    dr:switch_to_set()
    dr.talked_out = FALSE
    meche.locked_up = TRUE
    mn.gun:free()
    manny:put_in_set(dr)
    manny:setpos(0.362641, -0.0488605, 0)
    manny:setrot(0, 53.0956, 0)
    system:unlock_display()
    START_CUT_SCENE()
    set_override(cut_scene.hostage_override)
    RunFullscreenMovie("hostage.snm")
    END_CUT_SCENE()
    dr:current_setup(dr_winws)
    sleep_for(500)
    manny:walkto(0.308138, -0.46322, 0)
end
cut_scene.hostage_override = function() -- line 487
    kill_override()
    music_state:unpause()
    shut_up_everybody()
    manny:setpos(0.308138, -0.46322, 0)
    manny:setrot(0, 171.203, 0)
    dr:current_setup(dr_winws)
    IrisUp(0, 0, 1)
end
cut_scene.lamancha = function() -- line 497
    cutscene_menu:enable_cutscene("lamancha")
    set_override(cut_scene.skip_lamancha)
    START_CUT_SCENE()
    RunFullscreenMovie("lamancha.snm")
    END_CUT_SCENE()
    gh:come_out_door(gh.ac_door)
    IrisUp(609, 314, 1000)
end
cut_scene.skip_lamancha = function() -- line 510
    kill_override()
    gh:come_out_door(gh.ac_door)
    IrisUp(609, 314, 1000)
end
cut_scene.posidon = function() -- line 516
    cutscene_menu:enable_cutscene("poseidon")
    cur_puzzle_state[42] = TRUE
    cur_puzzle_state[44] = TRUE
    raised_lamancha = TRUE
    START_CUT_SCENE()
    set_override(cut_scene.skip_poseidon, cut_scene)
    RunFullscreenMovie("poseidon.snm")
    END_CUT_SCENE()
    cut_scene:skip_poseidon()
end
cut_scene.skip_poseidon = function(arg1, arg2) -- line 532
    if arg2 then
        kill_override()
    end
    if meche_freed then
        bl.talked_kids = TRUE
        start_script(bl.everybodys_here)
    else
        start_script(bl.boat_before_passengers)
    end
end
cut_scene.exodus = function() -- line 545
    cutscene_menu:enable_cutscene("exodus")
    cur_puzzle_state[45] = TRUE
    manny:clear_hands()
    mn.chisel:put_in_limbo()
    START_CUT_SCENE()
    bl:switch_to_set()
    set_override(cut_scene.skip_exodus, cut_scene)
    RunFullscreenMovie("exodus.snm")
    END_CUT_SCENE()
    cut_scene:skip_exodus()
end
cut_scene.skip_exodus = function(arg1, arg2) -- line 561
    if arg2 then
        kill_override()
    end
    lu:switch_to_set()
    break_here()
end
cut_scene.bloodeye = function() -- line 571
    cutscene_menu:enable_cutscene("crushed")
    cur_puzzle_state[46] = TRUE
    stop_sound("lu.imu")
    manny.is_holding = nil
    manny:stop_chore(ms_hold_scythe, "mn2.cos")
    manny.hold_chore = nil
    set_override(cut_scene.skip_bloodeye, cut_scene)
    START_CUT_SCENE()
    RunFullscreenMovie("crushed.snm")
    NukeResources()
    GetSystemFonts()
    CheckForCD("at.set", TRUE)
    END_CUT_SCENE()
    start_script(cut_scene.post_bloodeye)
end
cut_scene.skip_bloodeye = function() -- line 592
    kill_override()
    StopMovie()
    NukeResources()
    CheckForCD("at.set", TRUE)
    start_script(cut_scene.post_bloodeye)
end
cut_scene.post_bloodeye = function() -- line 601
    START_CUT_SCENE()
    bs:switch_to_set()
    doorman_in_hot_box = TRUE
    bs:come_out_door(bs.tg_door)
    sleep_for(500)
    manny:say_line("/syma156/")
    wait_for_message()
    END_CUT_SCENE()
    manny:say_line("/syma157/")
end
BundleResource("chepito.cos")
BundleResource("hm1_hitman.cos")
BundleResource("hm2_hitman.cos")
BundleResource("hm3_hitman.cos")
BundleResource("nautical_inv.set")
BundleResource("binoplug.snm")
